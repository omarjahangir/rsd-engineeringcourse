




<!DOCTYPE html>
<!--[if IE 7]> <html lang="en" class="lt-ie9 lt-ie8 no-js"> <![endif]-->
<!--[if IE 8]> <html lang="en" class="lt-ie9 no-js"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
    <meta charset=utf-8 />
    <meta name="author" content="UCL" />
    <meta name="description" content="UCL Homepage" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- social meta -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@uclnews">
    <meta name="twitter:title" content="UCL - London's Global University">
    <meta name="twitter:description" content="UCL (University College London) is London's leading multidisciplinary university, with 8,000 staff and 25,000 students.">
    <meta name="twitter:creator" content="@UCLWAMS">
    <meta name="twitter:image:src" content="http://www.ucl.ac.uk/visual-identity/logos/standalone.png">
    <meta property="og:image" content="http://www.ucl.ac.uk/visual-identity/logos/standalone.png" />
    <meta property="og:title" content="UCL - London's Global University" />
    <meta property="og:url" content="http://www.ucl.ac.uk" />
    <meta property="og:site_name" content="UCL" />
    <meta property="og:description" content="UCL (University College London) is London's leading multidisciplinary university, with 8,000 staff and 25,000 students." />
    <meta property="og:type" content="website" />
    <meta property="og:profile_id" content="uclofficial" />
    <!-- end social meta -->

  <title>Cython</title>

  <link href="/rsd-engineeringcourse/css/screen.min.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <link href="/rsd-engineeringcourse/css/jekyll-styles.css" rel="stylesheet" type="text/css">
  <link href="/rsd-engineeringcourse/site-styles/local_styles.css" rel="stylesheet" type="text/css">
  <link href="/rsd-engineeringcourse/site-styles/ipython.css" rel="stylesheet" type="text/css">

  <link rel="shortcut icon" href="/rsd-engineeringcourse/images/favicon.ico" />
    <link rel="apple-touch-icon-precomposed" href="/rsd-engineeringcourse/favicon-152.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="/rsd-engineeringcourse/favicon-144.png">

  <script src="/rsd-engineeringcourse/js/lib/modernizr-custom.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>

    <script>
      var cuttingTheMustard = document.querySelector && window.localStorage && window.addEventListener;

      Modernizr.load({
        //cutting the mustard as used by the BBC
        test: cuttingTheMustard
        //if old browser load the shiv
        ,
        nope: [
          '/rsd-engineeringcourse/js/lib/html5shiv-printshiv.min.js', '/rsd-engineeringcourse/js/lib/respond.min.js'
        ]
      });
      //set conditional assets for main.js
      var globalSiteSpecificVars = {
        pathToJquery: "/rsd-engineeringcourse/js/lib/jquery-1.9.1.min",
        googleAnalyticsIdsArray: [] //specify array of site specific id's NOT UCL generic UA-943297-1
      }
      if (cuttingTheMustard) {
        globalSiteSpecificVars.pathToJquery = '/rsd-engineeringcourse/js/lib/jquery-2.1.1.min';
      }
    </script>
    <script src="/rsd-engineeringcourse/js/lib/require.min.js"></script>
    <script src="/rsd-engineeringcourse/js/main.js"></script>
    <script>
      require.config({
        baseUrl: '/rsd-engineeringcourse/js/lib'
      });
        require(["app/general", "app/searchWithAutoComplete", "app/tabs"]);//load the default stuff
    </script>
</head>

<body id="index" class="layout-vertical layout-vertical--nav-1col">

  <header class="header header--desktop">

  <a class="header__close" href="#">
    <img src="/rsd-engineeringcourse/images/close.png" class="lazy" data-src="//static.ucl.ac.uk/indigo/images/close.png" alt="X" />Close</a>

  <div class="masthead">

  <div class="wrapper clearfix">

      <div class="masthead__search">
					<form action="#" method="get">
						<div class="search-form">
							<input type="search" placeholder="Search UCL websites, people and more" class="search-form__input search-form__input--search" value="">
						</div>
						<input type="submit" name="sumbit" value="Go" class="btn search-form__input search-form__input--submit" />
					</form>
				</div>


				<nav class="masthead__nav m-clear">
					<ul class="masthead__list">
						<li class="masthead__item"><a href="index.php" class="masthead__link">UCL Home</a>
						</li>
						<li class="masthead__item"><a href="prospective-students.php" class="masthead__link">Prospective students</a>
						</li>
						<li class="masthead__item"><a href="current-students.php" class="masthead__link">Current students</a>
						</li>
						<li class="masthead__item"><a href="staff.php" class="masthead__link">Staff</a>
						</li>
					</ul>
				</nav>
			</div>

</div><!-- end .masthead -->


  <div class="wrapper">

    <div class="photograph">
  <div class="brand">
    <p class="brand__heading">MPHYG001: Research Software Engineering With Python</p>
    <a href="/" class="brand__link"><span class="visually-hidden">Home</span></a>
    <img src="//cdn.ucl.ac.uk/img/blank.gif" data-src="//static.ucl.ac.uk/indigo/images/ucl-logo.svg" alt="UCL logo" id="logo" class="brand__logo lazy">  
  </div>
</div>


    <div class="sidebar">

      <nav class="nav nav--mobile">
        <ul>
          




        </ul>
      </nav>

      <nav class="nav nav--left">
        <ul>
          

 <li class="active"> <a href="/rsd-engineeringcourse/ch00python/">Introduction to Python</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/00pythons.html">Many kinds of Python</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/010exemplar.html">An example program</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/015variables.html">Variables</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/016using_functions.html">Using Functions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/023types.html">Types</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/025containers.html">Containers</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/028dictionaries.html">Dictionaries</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/029structures.html">Structures</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/030MazeSolution.html">Maze Solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/032conditionality.html">Conditionality</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/035looping.html">Looping</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/036MazeSolution2.html">Maze Control Solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/037comprehensions.html">Comprehensions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/038SolutionComprehension.html">Maze comprehension solution.</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/04functions.html">Defining functions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/050import.html">Modules</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch00python/101Classes.html">Classes</a> </li> </ul> </li><li class="active"> <a href="/rsd-engineeringcourse/ch01data/">Research Data in Python</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/060files.html">Working with files</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/061internet.html">Internet</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/062csv.html">CSV</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/064JsonYamlXML.html">Structured Datafiles</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/065MazeSaved.html">Maze Files Solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/066QuakeExercise.html">Earthquakes Exercise</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/068QuakesSolution.html">Quakes Solution</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/072plotting.html">Plotting</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/082NumPy.html">Numerical Python</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/084Boids.html">The Boids</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch01data/110Capstone.html">Understanding the Exemplar</a> </li> </ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch02git/">Version Control</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/01Intro.html">Introduction to Version Control</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/02Solo.html">Solo Git</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/03Mistakes.html">Fixing Mistakes</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/04Publishing.html">Publishing</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/05Collaboration.html">Collaboration</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/06ForkAndPull.html">Fork and Pull</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/09GitTheory.html">Git Theory</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/10Branches.html">Branches</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/11Miscellany.html">Git miscellany</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/12Remotes.html">Remotes</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/13Rebase.html">Rebase</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch02git/14Bisect.html">Bisect</a> </li> </ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch03tests/">Testing</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/01testingbasics.html">Testing Basics</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/02SaskatchewanFields.html">The Fields of Saskatchewan</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/03pytest.html">Test Frameworks</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/04EnergyExample.html">Energy Example</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/05Mocks.html">Mocks</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/06Debugger.html">Debugger</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/07CI.html">Continuous Integration</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch03tests/08DiffusionExample.html">Diffusion Example</a> </li></ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch04packaging/">Software Projects</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/010Installation.html">Installing Libraries</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/01Libraries.html">Libraries</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/025TextFiles.html">Writing Libraries</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/02Argparse.html">Argparse</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/03Packaging.html">Packaging</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/04documentation.html">Documentation</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/05Process.html">Agile and Waterfall</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/06Licensing.html">Licensing</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch04packaging/07Issues.html">Issue Tracking</a> </li> </ul> </li><li class="active"> <a href="/rsd-engineeringcourse/ch05construction/">Construction and Design</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/01introduction.html">Construction</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/02conventions.html">Coding Conventions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/03comments.html">Comments</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/05refactoring.html">Refactoring</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/06objects.html">Object Refactorings</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/08objects.html">Object Oriented Design</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/09patterns.html">Design Patterns</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch05construction/10boids.html">Exercise - Boids</a> </li> </ul> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch07dry/">Advanced Programming Techniques</a><ul> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/01intro.html">Don't Repeat Yourself</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/020Functional.html">Functional Programming</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/025Iterators.html">Iterators, Generators, Decorators, and Contexts</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/040Exceptions.html">Exceptions</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/050Operators.html">Operator Overloading</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/ch07dry/060Metaprogramming.html">Metaprogramming</a> </li> </ul> </li><li class="active"> <a href="/rsd-engineeringcourse/ch08performance/">Programming for Speed</a><ul><li class="active"> <a href="/rsd-engineeringcourse/ch08performance/010intro.html">Two Mandelbrots</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch08performance/015mandels.html">Faster Mandelbrots?</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch08performance/020numpy.html">NumPy</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch08performance/040cython.html">Cython</a> </li> <li class="active"> <a href="/rsd-engineeringcourse/ch08performance/050scaling.html">Scaling</a> </li> </ul> </li><li class="active"> <a href="/rsd-engineeringcourse/session99/">Installation</a><ul><li class="inactive"> <a href="/rsd-engineeringcourse/session99/linux.html">Linux</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/session99/mac.html">Mac OSX</a> </li> <li class="inactive"> <a href="/rsd-engineeringcourse/session99/windows.html">Windows</a> </li></ul> </li> 

        </ul>
      </nav>

    </div>
    <!-- end .sidebar -->

    <nav class="nav nav--top">
      <ul>
        
      </ul>
    </nav>

  </div>
  <!-- end .wrapper -->

  </header>
  <!-- end .header -->

  <div class="site-content wrapper">

    <header class="header header--mobile default-header">
      <a class="header__open" href="#">
        <img src="/rsd-engineeringcourse/images/ucl-menu.svg" alt="Menu" />
      </a>
    </header>

    <div class="site-content__inner clearfix">
      <div class="site-content__body">

          
            <nav class="breadcrumb clearfix">
              <ul class="breadcrumb__list">
                <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/">UCL</a></li>

  
    <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/ISD">ISD</a></li>
  
    <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/isd/services">Our services</a></li>
  
    <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/isd/services/research-it">Research IT</a></li>
  
    <li class="breadcrumb__item"><a href="http://www.ucl.ac.uk/isd/services/research-it/training">Training</a></li>
  

<li class="breadcrumb__item"><a href="/rsd-engineeringcourse/">MPHYG0001</a></li>



              </ul>
            </nav>
           <div class="site-content__main">
            
               <div id="slidelink">
                 <a href="/rsd-engineeringcourse/ch08performance/040cython.ipynb">Notebook download</a>
               </div>
            
            
          
          

    <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Cython">Cython<a class="anchor-link" href="#Cython">&#182;</a></h2><p>Cython can be viewed as an extension of Python where variables and functions are annotated with extra information, in particular types. The resulting Cython source code will be compiled into optimized C or C++ code, and thereby yielding substantial speed-up of slow Python code. In other word, cython provides a way of writting Python with  comparable performance to that of C/C++.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Start--Coding-in-Cython">Start  Coding in Cython<a class="anchor-link" href="#Start--Coding-in-Cython">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Cython code must, unlike Python, be compiled. This happens in the following stages:</p>
<ul>
<li>The cython code in <code>.pyx</code> file will be translated to a <code>C</code> file.</li>
<li>The <code>C</code> file will be compiled by a C compiler into a shared library, which will be directely loaded into Python. </li>
</ul>
<p>In ipython notebook, everything is a lot easier. One need only to load Cython extension (<code>%load_ext Cython</code>) at the beginning and put <code>%%cython</code> mark in front of cells of cython code. Cells with cython mark will be treated as a <code>.pyx</code> code and consequently, compiled into C.</p>
<p>For details, please see <a href="http://docs.cython.org/src/quickstart/build.html">Building Cython Code</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Pure python Mandelbrot set:</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">xmin</span><span class="o">=-</span><span class="mf">1.5</span>
<span class="n">ymin</span><span class="o">=-</span><span class="mf">1.0</span>
<span class="n">xmax</span><span class="o">=</span><span class="mf">0.5</span>
<span class="n">ymax</span><span class="o">=</span><span class="mf">1.0</span>
<span class="n">resolution</span><span class="o">=</span><span class="mi">300</span>
<span class="n">xstep</span><span class="o">=</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="n">xmin</span><span class="p">)</span><span class="o">/</span><span class="n">resolution</span>
<span class="n">ystep</span><span class="o">=</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="n">ymin</span><span class="p">)</span><span class="o">/</span><span class="n">resolution</span>
<span class="n">xs</span><span class="o">=</span><span class="p">[(</span><span class="n">xmin</span><span class="o">+</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="n">xmin</span><span class="p">)</span><span class="o">*</span><span class="n">i</span><span class="o">/</span><span class="n">resolution</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">resolution</span><span class="p">)]</span>
<span class="n">ys</span><span class="o">=</span><span class="p">[(</span><span class="n">ymin</span><span class="o">+</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="n">ymin</span><span class="p">)</span><span class="o">*</span><span class="n">i</span><span class="o">/</span><span class="n">resolution</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">resolution</span><span class="p">)]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">mandel</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="n">limit</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
    <span class="n">value</span><span class="o">=</span><span class="n">position</span>
    <span class="k">while</span> <span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">:</span>
        <span class="n">limit</span><span class="o">-=</span><span class="mi">1</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">position</span>
        <span class="k">if</span> <span class="n">limit</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">limit</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Compiled by Cython:</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> Cython 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="n">cython</span>

<span class="k">def</span> <span class="nf">mandel_cython</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="n">limit</span><span class="o">=</span><span class="mf">50</span><span class="p">):</span>
    <span class="n">value</span><span class="o">=</span><span class="n">position</span>
    <span class="k">while</span> <span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">&lt;</span><span class="mf">2</span><span class="p">:</span>
        <span class="n">limit</span><span class="o">-=</span><span class="mf">1</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="o">**</span><span class="mf">2</span><span class="o">+</span><span class="n">position</span>
        <span class="k">if</span> <span class="n">limit</span><span class="o">&lt;</span><span class="mf">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0</span>
    <span class="k">return</span> <span class="n">limit</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's verify the result</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="n">f</span><span class="p">,</span> <span class="n">axarr</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">axarr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">([[</span><span class="n">mandel</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span><span class="p">]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ys</span><span class="p">],</span><span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
<span class="n">axarr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Pure Python&#39;</span><span class="p">)</span>
<span class="n">axarr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">([[</span><span class="n">mandel</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span><span class="p">]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ys</span><span class="p">],</span><span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
<span class="n">axarr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Cython&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>Text(0.5,1,&#39;Cython&#39;)</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">timeit</span> [[mandel(complex(x,y)) for x in xs] for y in ys] # pure python
<span class="o">%</span><span class="k">timeit</span> [[mandel_cython(complex(x,y)) for x in xs] for y in ys] # cython
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>726 ms ± 2.52 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
517 ms ± 3.75 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We have improved the performance of a factor of 1.5 by just using the cython compiler, <strong>without changing the code</strong>!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Cython-with-C-Types">Cython with C Types<a class="anchor-link" href="#Cython-with-C-Types">&#182;</a></h3><p>But we can do better by telling Cython what C data type we would use in the code. Note we're not actually writing C, we're writing Python with C types.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>typed variable</em></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="n">cython</span>
<span class="k">def</span> <span class="nf">var_typed_mandel_cython</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mf">50</span><span class="p">):</span>
    <span class="k">cdef</span> <span class="kt">double</span> <span class="kt">complex</span> <span class="nf">value</span> <span class="c"># typed variable</span>
    <span class="n">value</span><span class="o">=</span><span class="n">position</span>
    <span class="k">while</span> <span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">&lt;</span><span class="mf">2</span><span class="p">:</span>
        <span class="n">limit</span><span class="o">-=</span><span class="mf">1</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="o">**</span><span class="mf">2</span><span class="o">+</span><span class="n">position</span>
        <span class="k">if</span> <span class="n">limit</span><span class="o">&lt;</span><span class="mf">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0</span>
    <span class="k">return</span> <span class="n">limit</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>typed function + typed variable</em></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="n">cython</span>
<span class="k">cpdef</span> <span class="nf">call_typed_mandel_cython</span><span class="p">(</span><span class="n">double</span> <span class="nb">complex</span> <span class="n">position</span><span class="p">,</span>
                               <span class="nb">int</span> <span class="n">limit</span><span class="o">=</span><span class="mf">50</span><span class="p">):</span> <span class="c"># typed function</span>
    <span class="k">cdef</span> <span class="kt">double</span> <span class="kt">complex</span> <span class="nf">value</span> <span class="c"># typed variable</span>
    <span class="n">value</span><span class="o">=</span><span class="n">position</span>
    <span class="k">while</span> <span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">&lt;</span><span class="mf">2</span><span class="p">:</span>
        <span class="n">limit</span><span class="o">-=</span><span class="mf">1</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="o">**</span><span class="mf">2</span><span class="o">+</span><span class="n">position</span>
        <span class="k">if</span> <span class="n">limit</span><span class="o">&lt;</span><span class="mf">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0</span>
    <span class="k">return</span> <span class="n">limit</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>performance of one number:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># pure python</span>
<span class="o">%</span><span class="k">timeit</span> a=mandel(complex(0,0)) 
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>14.2 µs ± 42.7 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># premitive cython</span>
<span class="o">%</span><span class="k">timeit</span> a=mandel_cython(complex(0,0)) 
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>9.88 µs ± 48.3 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># cython with C type variable</span>
<span class="o">%</span><span class="k">timeit</span> a=var_typed_mandel_cython(complex(0,0)) 
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>3.46 µs ± 9.74 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># cython with typed variable + function</span>
<span class="o">%</span><span class="k">timeit</span> a=call_typed_mandel_cython(complex(0,0))
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>805 ns ± 20 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Cython-with-numpy-ndarray">Cython with numpy ndarray<a class="anchor-link" href="#Cython-with-numpy-ndarray">&#182;</a></h3><p>You can use NumPy from Cython exactly the same as in regular Python, but by doing so you are losing potentially high speedups because Cython has support for fast access to NumPy arrays.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">ymatrix</span><span class="p">,</span><span class="n">xmatrix</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="n">ymin</span><span class="p">:</span><span class="n">ymax</span><span class="p">:</span><span class="n">ystep</span><span class="p">,</span><span class="n">xmin</span><span class="p">:</span><span class="n">xmax</span><span class="p">:</span><span class="n">xstep</span><span class="p">]</span>
<span class="n">values</span><span class="o">=</span><span class="n">xmatrix</span><span class="o">+</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">ymatrix</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="n">cython</span>
<span class="k">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="k">cimport</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> 

<span class="k">cpdef</span> <span class="nf">numpy_cython_1</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">double</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">position</span><span class="p">,</span> 
                     <span class="nb">int</span> <span class="n">limit</span><span class="o">=</span><span class="mf">50</span><span class="p">):</span> 
    <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="nf">long</span><span class="p">,</span><span class="nf">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">diverged_at</span>
    <span class="k">cdef</span> <span class="kt">double</span> <span class="kt">complex</span> <span class="nf">value</span>
    <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">xlim</span>
    <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">ylim</span>
    <span class="k">cdef</span> <span class="kt">double</span> <span class="kt">complex</span> <span class="nf">pos</span>
    <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">steps</span>
    <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">x</span><span class="p">,</span> <span class="nf">y</span>

    <span class="n">xlim</span><span class="o">=</span><span class="n">position</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
    <span class="n">ylim</span><span class="o">=</span><span class="n">position</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
    <span class="n">diverged_at</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">ylim</span><span class="p">,</span> <span class="n">xlim</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">xlim</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">ylim</span><span class="p">):</span>
             <span class="n">steps</span><span class="o">=</span><span class="n">limit</span>
             <span class="n">value</span><span class="o">=</span><span class="n">position</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">]</span>
             <span class="n">pos</span><span class="o">=</span><span class="n">position</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">]</span>
             <span class="k">while</span> <span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">&lt;</span><span class="mf">2</span> <span class="ow">and</span> <span class="n">steps</span><span class="o">&gt;=</span><span class="mf">0</span><span class="p">:</span>
                <span class="n">steps</span><span class="o">-=</span><span class="mf">1</span>
                <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="o">**</span><span class="mf">2</span><span class="o">+</span><span class="n">pos</span>
             <span class="n">diverged_at</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">]</span><span class="o">=</span><span class="n">steps</span>
  
    <span class="k">return</span> <span class="n">diverged_at</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note the double import of numpy: the standard numpy module and a Cython-enabled version of numpy that ensures fast indexing of and other operations on arrays. Both import statements are necessary in code that uses numpy arrays. The new thing in the code above is declaration of arrays by np.ndarray.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">timeit</span> data_cy=[[mandel(complex(x,y)) for x in xs] for y in ys] # pure python
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>744 ms ± 4.01 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">timeit</span> data_cy=[[call_typed_mandel_cython(complex(x,y)) for x in xs] for y in ys] # typed cython
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>57.8 ms ± 206 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">timeit</span> numpy_cython_1(values) # ndarray
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>36.3 ms ± 327 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>A trick of using <code>np.vectorize</code></strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">numpy_cython_2</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vectorize</span><span class="p">(</span><span class="n">call_typed_mandel_cython</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">timeit</span> numpy_cython_2(values) #  vectorize
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>42.3 ms ± 304 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Calling-C-functions-from-Cython">Calling C functions from Cython<a class="anchor-link" href="#Calling-C-functions-from-Cython">&#182;</a></h3><p><strong>Example: compare <code>sin()</code> from Python and C library</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="n">cython</span>
<span class="k">import</span> <span class="nn">math</span>
<span class="k">cpdef</span> <span class="nf">py_sin</span><span class="p">():</span>
    <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">x</span>
    <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">y</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">1e7</span><span class="p">):</span>
        <span class="n">y</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="n">cython</span>
<span class="k">from</span> <span class="nn">libc.math</span> <span class="k">cimport</span> <span class="n">sin</span> <span class="k">as</span> <span class="n">csin</span> <span class="c"># import from C library</span>
<span class="k">cpdef</span> <span class="nf">c_sin</span><span class="p">():</span>
    <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">x</span>
    <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">y</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">1e7</span><span class="p">):</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">csin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">timeit</span> [math.sin(i) for i in range(int(1e7))] # python
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>2.3 s ± 7.43 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">timeit</span> py_sin()                                # cython call python library
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>1.78 s ± 6.73 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">timeit</span> c_sin()                                 # cython call C library
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>6.02 ms ± 271 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
 




        </div>

      </div>
    </div>

  </div>
  <!-- end .site-content -->

  <footer class="footer wrapper">
  <div class="footer__inner clearfix">
             <article class="block block--col-1">
                <h2 class="as-h5">Facilities</h2>
                <ul class="footer__list list-unstyled">
					<li class="footer__item"><a href="http://www.ucl.ac.uk/departments/faculties">Faculties and departments</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/library/">Library</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/museums">Museums and Collections</a></li>
					<li class="footer__item"><a href="http://www.thebloomsbury.com/">UCL Bloomsbury Theatre</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/maps">Maps and buildings</a></li>
				</ul>
            </article>
            <article class="block block--col-2">
                <h2 class="as-h5">Locations</h2>
                <ul class="footer__list list-unstyled">
					<li class="footer__item"><a href="http://www.ucl.ac.uk/london">UCL and London</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/australia">UCL Australia</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/qatar">UCL Qatar</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/global">UCL Global</a></li>
				</ul>
            </article>
            <article class="block block--col-3">
                <h2 class="as-h5">Connect with us</h2>
                <ul class="footer__list list-unstyled">
					<li class="footer__item"><a href="http://www.ucl.ac.uk/alumni">Alumni</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/enterprise">Businesses</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/media">Media Relations</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/hr/jobs/">Jobs</a></li>
					<li class="footer__item"><a href="http://www.ucl.ac.uk/makeyourmark">Give to UCL</a></li>
				</ul>

      </article>
  
    <hr class="clear">
    <ul class="footer__list list-unstyled zero-bottom">
      <li class="footer__item text-muted small">University College London,&nbsp;Gower Street,&nbsp;London,&nbsp;WC1E 6BT&nbsp;Tel:&nbsp;+44&nbsp;(0)&nbsp;20 7679 2000</li>
    </ul>
    <ul class="list-inline footer__list list-unstyled list-inline--divided">
      <li class="text-muted small">Copyright © 2017-11-26 21:45:58 +0000 UCL</li>
      <li class="text-muted small"><a href="#">Disclaimer</a>
      </li>
      <li class="text-muted small"><a href="#">Freedom of Information</a>
      </li>
      <li class="text-muted small"><a href="#">Accessibility</a>
      </li>
      <li class="text-muted small"><a href="#">Privacy</a>
      </li>
      <li class="text-muted small"><a href="#">Cookies</a>
      </li>
      <li class="text-muted small"><a href="#">Contact Us</a>
      </li>
    </ul>
  </div>
</footer>


  <script src="/rsd-engineeringcourse/js/lib/require.min.js"></script>
  <script src="/rsd-engineeringcourse/js/main.js"></script>
    <script>
      require.config({
        baseUrl: '/rsd-engineeringcourse/js/lib'
      });
        require(["app/general", "app/searchWithAutoComplete", "app/tabs"]);//load the default stuff
    </script>

</body>

</html>

